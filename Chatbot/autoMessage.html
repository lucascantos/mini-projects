<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">        
        <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/album/">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    </head>
    <body>
        <div class='container mx-0'>
            <div class='row'>
                <div class='col-5'>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <label class="input-group-text" for="systemInput">Filtro</label>
                        </div>
                        <select onchange="make_messages()" class="custom-select" id="systemInput">
                            <option selected>Sistemas</option>
                            <option value="Chuva Forte">Chuva Forte</option>
                            <option value="Trovoadas">Trovoadas</option>
                            <option value="Ventania">Ventania</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Cidades</span>
                        </div>
                        <input onkeydown="console.log('YEET')" type="text" aria-label="origem" class="form-control" placeholder='Origem'>
                        <input type="text" aria-label="destino" class="form-control" placeholder="Destino">
                    </div>

                    <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Causa</span>
                            </div>
                            <input type="text" aria-label="causa" class="form-control" placeholder="frente fria">
                        </div>

                    <div class="input-group">
                        <div class="input-group-prepend">
                            <label class="input-group-text" for="windInput">Ventos</label>
                        </div>
                        <select class="custom-select" id="windInput">
                            <option selected>Vento</option>
                            <option value="50km/h">50km/h</option>
                            <option value="60km/h">60km/h</option>
                        </select>
                    </div>
                </div> 

                <div class='col-7'  id='messageWrapper'>

                    <ul  id='messageTable'></ul>

                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <script>

            var sms = [
                {
                    categoria: 'Chuva Forte',
                    mensagem: ['Temos alerta de chuva forte entre XXX seguindo para YYY dentro de ZZZ. Isso é causado por AAA. Há risco de rajadas de vento e trovoadas.',
                            'Chove forte em XXX e segue em direção à YYY. Essa chuva ocorre por AAA e deve atingir a cidade em ZZZ.',
                            'Há registro de Temporais na cidade de XXX causado por AAA. A previsão é que atinja YYY em ZZZ. Não se descarta a possibilidade de ventos fortes e descargas eletricas.',
                            ]
                },
                {
                    categoria: 'Trovoadas',
                    mensagem: ['Agora temos tempestades com raios em XXX. Essas trovoadas devem chegar em YYY nos proximos ZZZ. Essa tempestade ocorre por conta de AAA.',
                            'Os ultimos dados mostram descargas eletricas proximas à XXX. Nas proximas ZZZ deve atingir YYY.'
                            ]
                },
                {
                    categoria: 'Ventania',
                    mensagem: ['Alerta de ventania para XXX. Esse vento ocorre por conta de AAA e há risco de novas rajadas nas proximas ZZZ.',
                            'Em XXX, foi registrado rajadas de vento acima de 50km/h.',
                            'Houve registro de Rajadas de Vento forte em XXX causado pela aproximação de AAA. '
                            ]
                }
            ];

            
            function make_messages(){
                
                var table = document.getElementById('messageTable');
                table.parentNode.removeChild(table);

                var p = document.getElementById('messageWrapper');
                var newTable = document.createElement('ul');                
                newTable.setAttribute('id', 'messageTable');                               
                newTable.setAttribute('class', 'list-group list-group-flush');

                var system = document.getElementById('systemInput').value;
                for (var i = 0; i < sms.length; i++){
                    if (sms[i]['categoria'] == system || system == 'Sistemas'){

                        var newHeader = document.createElement('H4');                                     
                        newHeader.setAttribute('class', 'h4');
                        newHeader.innerHTML = sms[i]['categoria'];
                        newTable.appendChild(newHeader);

                        var category = sms[i]['categoria'];
                        for (var j = 0; j < sms[i]['mensagem'].length; j++){

                            var newMessage = document.createElement('li');
                            newMessage.setAttribute('class', 'list-group-item');
                            newMessage.innerHTML = sms[i]['mensagem'][j];
                            newTable.appendChild(newMessage);


                        }
                    }
                }

                p.appendChild(newTable);
            }
            function edit_messages(newValue){

            }
            
            //excluir e criar
            // alterar o existente

            // For eache SMS, Plot h1 de categoria e txt de mensagem
            // Pra cada coisa digitada, alterar algo    
        </script>
    </body>
</html>